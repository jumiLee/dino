<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="achv"> 

	<resultMap id="achvList" type="first.vassystem.dto.AchvList">
 		<result property = "achvType" 			column = "achv_type"/>
 		<result property = "achvId" 			column = "achv_id"/>
 		<result property = "achvTitle" 			column = "achv_title"/>
 		<result property = "achvContent" 		column = "achv_content"/>
 		<result property = "achvCompleteCnt" 	column = "achv_complete_cnt"/>
 		<result property = "achvRwdType" 		column = "achv_rwd_type"/>
 		<result property = "achvRwdId" 			column = "achv_rwd_id"/>
 		<result property = "achvRwdSubId" 		column = "achv_rwd_sub_id"/>
 		<result property = "rwdName" 			column = "rwd_name"/>
 		<result property = "achvCompleteFlag" 	column = "achv_complete_flag"/>
 		<result property = "rwdRcvFlag" 		column = "rwd_rcv_flag"/>
 		<result property = "achvCnt" 			column = "achv_cnt"/>
 		<result property = "achvCompleteDt" 	column = "achv_complete_dt"/>
 		<result property = "rwdRcvDt" 			column = "rwd_rcv_dt"/>
	</resultMap>

	<select id="getAchvList" statementType="CALLABLE" parameterType="first.common.util.ParamVO" resultMap ="achvList"> 
	{ 
		call abn_getUserAchv (
			1,
			#{inParam01,mode=IN,jdbcType=INTEGER},	<!-- 사용자계정 -->
			#{inParam02,mode=IN,jdbcType=INTEGER},	<!-- 업적타입	-->
			null									<!-- 업적아이디	-->
		)
	}
	</select>
	
	<select id="getAchvRwd" statementType="CALLABLE" parameterType="first.common.util.ParamVO"> 
	{ 
		call abn_mgmtUserAchvReward (
			 #{inParam01	,mode=IN, jdbcType=INTEGER}	<!-- 보상처리방식-->
			,#{inParam02	,mode=IN, jdbcType=INTEGER}	<!-- 사용자계정 -->
			,#{inParam03	,mode=IN, jdbcType=INTEGER}	<!-- 업적타입	-->
			,#{inParam04	,mode=IN, jdbcType=INTEGER}	<!-- 업적아이디	-->
			,#{outParam01	,mode=OUT,jdbcType=INTEGER}
			,#{outStrParam01,mode=OUT,jdbcType=VARCHAR}
		)
	}
	</select>
	
	<select id="registerUserAchv" statementType="CALLABLE" parameterType="first.common.util.ParamVO"> 
	{ 
		call abn_mgmtUserAchv_out (
			 #{inParam01	,mode=IN, jdbcType=INTEGER}	<!-- job_type (1:업적수행업데이트) -->
			,#{inParam02	,mode=IN, jdbcType=INTEGER}	<!-- 사용자계정	-->	
			,null										<!-- target user (사용안함)-->										
			,#{inParam03	,mode=IN, jdbcType=INTEGER}	<!-- 업적타입	-->
			,#{inParam04	,mode=IN, jdbcType=INTEGER}	<!-- 업적아이디	-->
			,#{inParam05	,mode=IN, jdbcType=INTEGER}	<!-- 업적회수	-->
			,#{outParam01	,mode=OUT,jdbcType=INTEGER}	
		)
	}
	</select>
</mapper>